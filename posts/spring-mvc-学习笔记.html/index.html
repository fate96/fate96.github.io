<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Spring MVC 学习笔记 - Luckyouo Blog</title><meta name=Description content="Luckyouo 的小窝"><meta property="og:title" content="Spring MVC 学习笔记"><meta property="og:description" content="前言 MVC 三个单词分别为 Model 、 View 和 Controller ，MVC 模式是一种常用的web开发模式，比如python的 django 也是采用该模式。Spring 框架也提供了该模式，负"><meta property="og:type" content="article"><meta property="og:url" content="https://luckyouo.github.io/posts/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/"><meta property="og:image" content="https://luckyouo.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-09T22:49:12+08:00"><meta property="article:modified_time" content="2022-04-21T15:05:29+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://luckyouo.github.io/logo.png"><meta name=twitter:title content="Spring MVC 学习笔记"><meta name=twitter:description content="前言 MVC 三个单词分别为 Model 、 View 和 Controller ，MVC 模式是一种常用的web开发模式，比如python的 django 也是采用该模式。Spring 框架也提供了该模式，负"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://luckyouo.github.io/posts/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/><link rel=prev href=https://luckyouo.github.io/posts/spring-transaction%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/><link rel=next href=https://luckyouo.github.io/posts/freemarker-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Spring MVC 学习笔记","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/luckyouo.github.io\/posts\/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html\/"},"genre":"posts","keywords":"MVC","wordcount":2790,"url":"https:\/\/luckyouo.github.io\/posts\/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html\/","datePublished":"2022-04-09T22:49:12+08:00","dateModified":"2022-04-21T15:05:29+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"luckyouo"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/luckyouo class=github-corner target=_blank title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Luckyouo Blog">Luckyouo Blogs</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>归档 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/friends/><i class='fas fa-fw fa-fan fa-spin'></i> 友链 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Luckyouo Blog">Luckyouo Blogs</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>归档</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/friends/ title><i class='fas fa-fw fa-fan fa-spin'></i>友链</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Spring MVC 学习笔记</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>luckyouo</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/spring/><i class="far fa-folder fa-fw"></i>Spring</a></span></div><div class=post-meta-line><i class="far fa-calendar fa-fw"></i>&nbsp;<time datetime=2022-04-09>2022-04-09</time>&nbsp;<i class="far fa-calendar-plus fa-fw"></i>&nbsp;<time datetime=2022-04-21>2022-04-21</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2790 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 6 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ol><li><a href=#前言>前言</a></li><li><a href=#使用流程>使用流程</a></li><li><a href=#使用流程-1>使用流程</a><ol><li><a href=#导包>导包</a></li><li><a href=#配置前端控制器>配置前端控制器</a></li><li><a href=#配置-handlermapping-和-handleradapter>配置 <code>HandlerMapping</code> 和 <code>HandlerAdapter</code></a></li><li><a href=#配置controller和url>配置Controller和Url</a></li><li><a href=#拦截器配置可选>拦截器配置（可选）</a></li></ol></li><li><a href=#其他设置>其他设置</a><ol><li><a href=#requestmapping功能>RequestMapping功能</a></li><li><a href=#controller-方法的返回值>Controller 方法的返回值</a></li><li><a href=#请求参数封装>请求参数封装</a></li><li><a href=#请求参数类型转换>请求参数类型转换</a></li><li><a href=#请求参数集合封装>请求参数集合封装</a></li><li><a href=#文件上传>文件上传</a></li></ol></li><li><a href=#参考资料>参考资料</a></li></ol></nav></div></div><div class=content id=content><h2 id=前言>前言</h2><p>MVC 三个单词分别为 <code>Model</code> 、 <code>View</code> 和 <code>Controller</code> ，MVC 模式是一种常用的web开发模式，比如python的 <code>django</code> 也是采用该模式。Spring 框架也提供了该模式，负责表示层。</p><figure><img src=/images/spring_mvc.png><figcaption><h4>spring mvc流程图</h4></figcaption></figure><h2 id=使用流程>使用流程</h2><p><code>Spring MVC</code> 提供了四大组件，<strong>前端控制器（DispatcherServlet）、处理器映射器（HandlerMapping）、处理器适配器（HandlerAdapter）以及视图解析器（ViewResolver）</strong>。</p><ol><li>用户请求发送到<strong>前端控制器 DispatcherServlet</strong>。</li><li>前端控制器 DispatcherServlet 接收到请求后，DispatcherServlet 会使用 HandlerMapping 来处理，<strong>HandlerMapping 会查找到具体进行处理请求的 Handler 对象</strong>。</li><li>HandlerMapping 找到对应的 Handler 之后，并不是返回一个 Handler 原始对象，而是一个 Handler 执行链（HandlerExecutionChain），在这个执行链中包括了拦截器和处理请求的 Handler。HandlerMapping 返回一个执行链给 DispatcherServlet。</li><li>DispatcherServlet 接收到执行链之后，会<strong>调用 Handler 适配器去执行 Handler</strong>。</li><li>Handler 适配器执行完成 Handler（也就是 Controller）之后会得到一个 ModelAndView，并返回给 DispatcherServlet。</li><li>DispatcherServlet 接收到 HandlerAdapter 返回的 ModelAndView 之后，会根据其中的视图名调用 ViewResolver。</li><li><strong>ViewResolver 根据逻辑视图名解析成一个真正的 View 视图</strong>，并返回给 DispatcherServlet。</li><li>DispatcherServlet 接收到视图之后，会根据上面的 ModelAndView 中的 model 来进行视图中数据的填充，也就是所谓的<strong>视图渲染</strong>。</li><li>渲染完成之后，DispatcherServlet 就可以将结果返回给用户了。</li></ol><h2 id=使用流程-1>使用流程</h2><h3 id=导包>导包</h3><p>导入 <code>spring-webmvc</code> 依赖，该依赖依赖于 <code>spring-context</code> ，所以可以不用手动导入 <code>spring-context</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-webmvc<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>5.3.17<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=配置前端控制器>配置前端控制器</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;servlet&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-name&gt;</span>dispatcher<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class=nt>&lt;/servlet-class&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;init-param&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;param-name&gt;</span>contextConfigLocation<span class=nt>&lt;/param-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;param-value&gt;</span>classpath:application.xml<span class=nt>&lt;/param-value&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/init-param&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/servlet&gt;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=nt>&lt;servlet-mapping&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet-name&gt;</span>dispatcher<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;url-pattern&gt;</span>/<span class=nt>&lt;/url-pattern&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=配置-handlermapping-和-handleradapter>配置 <code>HandlerMapping</code> 和 <code>HandlerAdapter</code></h3><p>可以通过配置文件配置也可以通过注解配置。</p><ol><li>通过配置文件</li></ol><p>在配置文件中配置 <code>springmvc</code> 的所需要的 <code>bean</code> 。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&#34;</span><span class=nt>&gt;&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&#34;</span><span class=nt>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>通过注解方式（常用）</li></ol><p>在配置文件进行驱动注册（需要使用 spring-context 的注解扫描）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;context:component-scan</span> <span class=na>base-package=</span><span class=s>&#34;com.cskaoyan&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;mvc:annotation-driven/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=配置controller和url>配置Controller和Url</h3><p>可以通过实现接口实现，也可以通过注解实现.</p><ol><li>实现接口实现。实现 <code>Controller</code> 接口，并重写 <code>handlerRequest</code> 方法。并在配置文件配置 <code>url</code> 映射。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>HelloController</span> <span class=kd>implements</span> <span class=n>Controller</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Overriders</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>ModelView</span> <span class=nf>handleRequest</span><span class=o>(</span><span class=n>HttpServletRequest</span> <span class=n>request</span><span class=o>,</span> <span class=n>HttpServeletResponce</span> <span class=n>responce</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>name=</span><span class=s>&#34;hello&#34;</span> <span class=na>class=</span><span class=s>&#34;com.cskaoyan.controller.HelloController&#34;</span><span class=nt>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>通过注解实现。（常用）</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Controller</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>HelloController</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@RequestMapping</span><span class=o>(</span><span class=s>&#34;/hello&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>ModelAndView</span> <span class=nf>login</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>可以通过 <code>application.xml</code> 配置文件设置 <code>url</code> 路径的前缀和后缀，减少路径名书写。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;prefix&#34;</span> <span class=na>value=</span><span class=s>&#34;/WEB-INF/view/&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;suffix&#34;</span> <span class=na>value=</span><span class=s>&#34;.jsp&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=拦截器配置可选>拦截器配置（可选）</h3><p>SpringMVC 的处理器拦截器类似于Servlet 开发中的过滤器Filter，用于对处理器进行预处理和后处理。</p><ol><li>实现 <code>HandlerIntercepter</code> 接口，并重写 <code>preHandler</code> 、 <code>postHandler</code> 和 <code>afterCompletion</code> 方法。</li><li>在 <code>application.xml</code> 文件中配置拦截器。其中 <code>mapping</code> 表示配置的内容对应拦截的 <code>url</code> 范围。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;mvc:interceptors&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;mvc:interceptor&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;mvc:mapping</span> <span class=na>path=</span><span class=s>&#34;/user/*&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;com.cskaoyan.hander.Myhandeler&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/mvc:interceptor&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/mvc:interceptors&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>preHandler</code> ：预处理回调方法，实现处理器的预处理（如登录检查），第三个参数为响应的处理器。返回值为 <code>boolean</code> ，true表示继续流程（如调用下一个拦截器或处理器），false表示流程中断（如登录检查失败），不会继续调用其他的拦截器或处理器，此时我们需要通过response来产生响应</li><li><code>postHandler</code> ： 后处理回调方法，实现处理器的后处理（但在渲染视图之前），此时我们可以通过modelAndView（模型和视图对象）对模型数据进行处理或对视图进行处理，modelAndView也可能为null。</li><li><code>afterCompletion</code> ： 整个请求处理完毕回调方法，即在视图渲染完毕时回调，如性能监控中我们可以在此记录结束时间并输出消耗时间，还可以进行一些资源清理，类似于try-catch-finally中的finally，但仅调用处理器执行链中preHandle返回true的拦截器的afterCompletion</li></ul><p>可以配置多个拦截器，拦截范围相同时，则按注册顺序执行。只要 <code>preHandler</code> 返回为 <code>true</code> 时，<code>afterCompletion</code> 一定会执行到。</p><h2 id=其他设置>其他设置</h2><h3 id=requestmapping功能>RequestMapping功能</h3><ol><li>url 路径映射</li><li>窄化请求。可以在 <code>Controller</code> 类上同时配置 <code>RequestMapping</code> ，类里面的所有方法都在父路径里面。</li><li>请求方法限定。使用 <code>Request.Method</code> 来限制请求方法。同时也可以通过其他参数配置限定其他参数。</li></ol><h3 id=controller-方法的返回值>Controller 方法的返回值</h3><p>返回值类型可以为如下三种：</p><ol><li><code>ModelAndView</code> : 返回模型视图对象，可以使用该对象来设置请求的视图。</li><li><code>Void</code> ： 请求参数中必须使用 <code>(HttpServletRequest request, HttpServeletResponce responce)</code> ，使用 <code>request</code> 来设置请求视图。</li><li><code>String</code> ： 返回视图对应的字符串。会自动转发到对应的视图文件上，也可也手动使用 <code>forward</code> 或者 <code>redirect</code> 转发到对应的视图的解析器上，也可以转发到其他 <code>Controller</code> 的 url 路径上。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>return</span> <span class=s>&#34;forward:hello.jsp&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=s>&#34;redirect:hello.jsp&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=s>&#34;redirct:/user/login&#34;</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=请求参数封装>请求参数封装</h3><ol><li>使用 <code>request</code> 对象提取</li></ol><p>在请求参数中，增加 <code>(HttpServletRequest request, HttpServeletResponce responce)</code> 参数，利用 <code>request</code> 对象根据 <code>key</code> 获取对应的 <code>value</code> 。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>String</span> <span class=n>str</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=na>getParameter</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>基本数据类型获取</li></ol><p>需要与请求参数 <code>key</code> 一一对应，即形参必须同名，通过相同的参数名提取。</p><ol start=3><li>将请求参数封装到 <code>JavaBean</code> 对象当中（常用）</li></ol><p>需要在视图页面使用 <code>对象.属性</code> 来设置传递过来的 <code>value</code> ，如果存在多个对象时，可以封装一个含有多个对象的对象。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;input type=&#34;text&#34; name=&#34;user.id&#34;&gt;
</span></span></code></pre></td></tr></table></div></div><p>如果在提交的过程中，使用了中文数据，则会导致，需要在配置文件 <code>web.xml</code> 中配置传输数据的编码格式。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;filter&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;filter-name&gt;</span>ebcoding<span class=nt>&lt;/filter-name&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class=nt>&lt;/filter-class&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;init-param&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;param-name&gt;</span>encoding<span class=nt>&lt;/param-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;param-value&gt;</span>utf-8<span class=nt>&lt;/param-value&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/init-param&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/filter&gt;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=nt>&lt;filter-mapping&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;filter-name&gt;</span>ebcoding<span class=nt>&lt;/filter-name&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;url-pattern&gt;</span>/*<span class=nt>&lt;/url-pattern&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/filter-mapping&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=请求参数类型转换>请求参数类型转换</h3><p>当请求的参数需要进行转换才能使用时，比如时间格式，需要对传入的数据进行格式转换。</p><ol><li>首先配置自定义的类型转换器。通过实现 <code>Converter</code> 接口，重写 <code>convert</code> 方法来实现类型转换器。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MyDateCOnverter</span> <span class=kd>implements</span> <span class=n>Converter</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Date</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Date</span> <span class=nf>convert</span><span class=o>(</span><span class=n>String</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>SimpleDateFormat</span> <span class=n>simpleDateFormat</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SimpleDateFormat</span><span class=o>(</span><span class=s>&#34;yy-MM-dd&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Date</span> <span class=n>parse</span> <span class=o>=</span> <span class=n>simpleDateFormat</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>parse</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>ParseException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>在 <code>application.xml</code> 文件中，配置类型转换器。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;mvc:annotation-driven</span> <span class=na>conversion-service=</span><span class=s>&#34;myConvertorService&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;myConvertorService&#34;</span> <span class=na>class=</span><span class=s>&#34;org.springframework.format.support.FormattingConversionServiceFactoryBean&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;converters&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;set&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;com.cskaoyan.converter.MyDateCOnverter&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;com.cskaoyan.converter.UserConverter&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/set&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/property&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=请求参数集合封装>请求参数集合封装</h3><ol><li>数组封装</li></ol><p>使用 <code>checkbox</code>，传递多个值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;h2&gt;封装数组获取参数&lt;/h2&gt;
</span></span><span class=line><span class=cl>&lt;form action=&#34;submitArray&#34; method=&#34;post&#34;&gt;
</span></span><span class=line><span class=cl>    id1:&lt;input  type=&#34;checkbox&#34; name=&#34;ids&#34; value=&#34;1&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    id2:&lt;input  type=&#34;checkbox&#34; name=&#34;ids&#34; value=&#34;2&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    id3:&lt;input  type=&#34;checkbox&#34; name=&#34;ids&#34; value=&#34;3&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    id4:&lt;input  type=&#34;checkbox&#34; name=&#34;ids&#34; value=&#34;4&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    id5:&lt;input  type=&#34;checkbox&#34; name=&#34;ids&#34; value=&#34;5&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    &lt;input type=&#34;submit&#34;&gt;
</span></span><span class=line><span class=cl>&lt;/form&gt;
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>集合封装</li></ol><p>使用索引设置 <code>ArrayList</code> 各个元素属性。同时构建一个 <code>JavaBean</code> 对象来接受请求参数，该对象含有对应的 <code>List&lt;T></code> 成员属性。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>QueryVo</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>User</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>content</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>count</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>users</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;QueryVo{&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;user=&#34;</span> <span class=o>+</span> <span class=n>user</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, content=&#39;&#34;</span> <span class=o>+</span> <span class=n>content</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, count=&#34;</span> <span class=o>+</span> <span class=n>count</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, users=&#34;</span> <span class=o>+</span> <span class=n>users</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=sc>&#39;}&#39;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=nf>getUsers</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>users</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setUsers</span><span class=o>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>users</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>users</span> <span class=o>=</span> <span class=n>users</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>QueryVo</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>,</span> <span class=n>String</span> <span class=n>content</span><span class=o>,</span> <span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>user</span> <span class=o>=</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>content</span> <span class=o>=</span> <span class=n>content</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>count</span> <span class=o>=</span> <span class=n>count</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>User</span> <span class=nf>getUser</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setUser</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>user</span> <span class=o>=</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getContent</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>content</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setContent</span><span class=o>(</span><span class=n>String</span> <span class=n>content</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>content</span> <span class=o>=</span> <span class=n>content</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>getCount</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>count</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setCount</span><span class=o>(</span><span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>count</span> <span class=o>=</span> <span class=n>count</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;h2&gt;封装集合获取参数&lt;/h2&gt;
</span></span><span class=line><span class=cl>&lt;form action=&#34;submitCollection&#34; method=&#34;post&#34;&gt;
</span></span><span class=line><span class=cl>    id:&lt;input  type=&#34;text&#34; name=&#34;user.id&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    username:&lt;input  type=&#34;text&#34; name=&#34;user.username&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    password:&lt;input  type=&#34;password&#34; name=&#34;user.password&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    phoneNumber:&lt;input  type=&#34;text&#34; name=&#34;user.phoneNumber&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    content:&lt;input  type=&#34;text&#34; name=&#34;content&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    count:&lt;input  type=&#34;text&#34; name=&#34;count&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    user1:id:&lt;input  type=&#34;text&#34; name=&#34;users[0].id&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user1:username:&lt;input  type=&#34;text&#34; name=&#34;users[0].username&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user1:password:&lt;input  type=&#34;password&#34; name=&#34;users[0].password&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user1:phoneNumber:&lt;input  type=&#34;text&#34; name=&#34;users[0].phoneNumber&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    user2:id:&lt;input  type=&#34;text&#34; name=&#34;users[1].id&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user2:username:&lt;input  type=&#34;text&#34; name=&#34;users[1].username&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user2:password:&lt;input  type=&#34;password&#34; name=&#34;users[1].password&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user2:phoneNumber:&lt;input  type=&#34;text&#34; name=&#34;users[1].phoneNumber&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    user3:id:&lt;input  type=&#34;text&#34; name=&#34;users[2].id&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user3:username:&lt;input  type=&#34;text&#34; name=&#34;users[2].username&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user3:password:&lt;input  type=&#34;password&#34; name=&#34;users[2].password&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>    user3:phoneNumber:&lt;input  type=&#34;text&#34; name=&#34;users[2].phoneNumber&#34;&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;input type=&#34;submit&#34;&gt;
</span></span><span class=line><span class=cl>&lt;/form&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=文件上传>文件上传</h3><p>图片上传需要外部依赖。</p><ol><li>导包。导入 <code>commons-io</code> 和 <code>commons-fileupload</code> 依赖。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>commons-io<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>commons-io<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>2.6<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>commons-fileupload<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>commons-fileupload<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.4<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>配置解析器。在 <code>application.xml</code> 配置解析器。（id 必须固定，否则异常）</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;multipartResolver&#34;</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.multipart.commons.CommonsMultipartResolver&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>接受参数中，增加 <code>MultipartFile myfile</code> 参数，使用 <code>transferTo</code> 方法传输的文件写入本地。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>String</span> <span class=n>filePath</span> <span class=o>=</span> <span class=s>&#34;path/to/file&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>File</span> <span class=n>file</span> <span class=o>=</span> <span class=k>new</span> <span class=n>File</span><span class=o>(</span><span class=n>filePath</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>myfile</span><span class=o>.</span><span class=na>transferTo</span><span class=o>(</span><span class=n>file</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=参考资料>参考资料</h2><p>[<a href=https://segmentfault.com/a/1190000021848063 target=_blank rel="noopener noreffer">深入源码分析SpringMVC执行过程</a>]</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-04-21</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://luckyouo.github.io/posts/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/ data-title="Spring MVC 学习笔记" data-via=xxxx data-hashtags=MVC><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://luckyouo.github.io/posts/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/ data-hashtag=MVC><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://luckyouo.github.io/posts/spring-mvc-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/ data-title="Spring MVC 学习笔记"><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/mvc/>MVC</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/spring-transaction%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/ class=prev rel=prev title="Spring Transaction学习笔记"><i class="fas fa-angle-left fa-fw"></i>Spring Transaction学习笔记</a>
<a href=/posts/freemarker-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html/ class=next rel=next title="Freemarker 学习笔记">Freemarker 学习笔记<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.110.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>luckyouo</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=sidebar_wo><div id=leimu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuA.png alt=雷姆 onmouseover='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuB.png"' onmouseout='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuA.png"' title=回到顶部></div><div class=sidebar_wo id=lamu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuA.png alt=雷姆 onmouseover='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuB.png"' onmouseout='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuA.png"' title=回到底部></div></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:15},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>