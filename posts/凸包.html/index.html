<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>凸包 - Luckyouo Blog</title><meta name=Description content="Luckyouo 的小窝"><meta property="og:title" content="凸包"><meta property="og:description" content="前言 点集 Q 的凸包是一个最小的凸多边形 P，满足 Q 中每个点都在 P 的边界上或在 P 的内部。 凸包 算法 Jarvis 算法 算法思路： 先找到一个必定在凸包的点，比如最左"><meta property="og:type" content="article"><meta property="og:url" content="https://luckyouo.github.io/posts/%E5%87%B8%E5%8C%85.html/"><meta property="og:image" content="https://luckyouo.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-23T09:18:46+08:00"><meta property="article:modified_time" content="2022-04-23T12:05:33+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://luckyouo.github.io/logo.png"><meta name=twitter:title content="凸包"><meta name=twitter:description content="前言 点集 Q 的凸包是一个最小的凸多边形 P，满足 Q 中每个点都在 P 的边界上或在 P 的内部。 凸包 算法 Jarvis 算法 算法思路： 先找到一个必定在凸包的点，比如最左"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://luckyouo.github.io/posts/%E5%87%B8%E5%8C%85.html/><link rel=prev href=https://luckyouo.github.io/posts/word2vec-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0.html/><link rel=next href=https://luckyouo.github.io/posts/java-%E6%95%B0%E7%BB%84%E5%92%8C%E9%9B%86%E5%90%88%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2.html/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"凸包","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/luckyouo.github.io\/posts\/%E5%87%B8%E5%8C%85.html\/"},"genre":"posts","keywords":"凸包, 算法","wordcount":2158,"url":"https:\/\/luckyouo.github.io\/posts\/%E5%87%B8%E5%8C%85.html\/","datePublished":"2022-04-23T09:18:46+08:00","dateModified":"2022-04-23T12:05:33+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"luckyouo"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/luckyouo class=github-corner target=_blank title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Luckyouo Blog">Luckyouo Blogs</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>归档 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i> 友链 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Luckyouo Blog">Luckyouo Blogs</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>归档</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/friends/ title><i class="fas fa-fw fa-fan fa-spin"></i>友链</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">凸包</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>luckyouo</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E7%AE%97%E6%B3%95/><i class="far fa-folder fa-fw"></i>算法</a></span></div><div class=post-meta-line><i class="far fa-calendar fa-fw"></i>&nbsp;<time datetime=2022-04-23>2022-04-23</time>&nbsp;<i class="far fa-calendar-plus fa-fw"></i>&nbsp;<time datetime=2022-04-23>2022-04-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2158 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ol><li><a href=#前言>前言</a></li><li><a href=#算法>算法</a><ol><li><a href=#jarvis-算法>Jarvis 算法</a></li><li><a href=#graham-算法>Graham 算法</a></li><li><a href=#andrew-扫描法>Andrew 扫描法</a></li></ol></li><li><a href=#参考资料>参考资料</a></li></ol></nav></div></div><div class=content id=content><h2 id=前言>前言</h2><p>点集 Q 的凸包是一个最小的凸多边形 P，满足 Q 中每个点都在 P 的边界上或在 P 的内部。</p><figure><img src=/images/ConvexHull.png><figcaption><h4>凸包</h4></figcaption></figure><h2 id=算法>算法</h2><h3 id=jarvis-算法>Jarvis 算法</h3><p>算法思路：</p><p>先找到一个必定在凸包的点，比如最左边的点。在找到下一个点，该点要求如下：除了凸包上的点，其他点和凸包上最后的一个点所构成的向量都在该点和凸包最后一个点构成的向量的左边或者右边（后续都选择一边即可，比如一直选左边），并将该点作为凸包的最后一个点。按照上述规则循环，直到回到开始的第一个点。</p><p>判断一个向量是否在另一个向量的左侧还是右侧时，可以通过向量叉乘，两个二维向量的叉乘结果为 $z$ 轴向量，通过其值正负判断左右（根据右手螺旋法则）。若结果为正，则向量在其左侧，若结果为0，则同向，若结果为负，则向量在其右侧。</p><p>算法因为每个点都需要判断其他点是否在其左侧还是右侧，时间复杂度为 $O(n*h)$，h 为凸包上点的数量，n 为总顶点数量。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[][]</span> <span class=nf>outerTrees</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>trees</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>trees</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>n</span> <span class=o>&lt;</span> <span class=n>4</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>trees</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>leftMost</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>0</span><span class=o>]</span> <span class=o>&lt;</span> <span class=n>trees</span><span class=o>[</span><span class=n>leftMost</span><span class=o>][</span><span class=n>0</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>leftMost</span> <span class=o>=</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;</span> <span class=n>res</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span><span class=o>[]</span> <span class=n>visit</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>p</span> <span class=o>=</span> <span class=n>leftMost</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>do</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>q</span> <span class=o>=</span> <span class=o>(</span><span class=n>p</span> <span class=o>+</span> <span class=n>1</span><span class=o>)</span> <span class=o>%</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>r</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>r</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>r</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=cm>/* 如果 r 在 pq 的右侧，则 q = r */</span> 
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>p</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>q</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>r</span><span class=o>])</span> <span class=o>&lt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>q</span> <span class=o>=</span> <span class=n>r</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* 是否存在点 i, 使得 p 、q 、i 在同一条直线上 */</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>visit</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>||</span> <span class=n>i</span> <span class=o>==</span> <span class=n>p</span> <span class=o>||</span> <span class=n>i</span> <span class=o>==</span> <span class=n>q</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>p</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>q</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>res</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>                    <span class=n>visit</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span>  <span class=o>(!</span><span class=n>visit</span><span class=o>[</span><span class=n>q</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>res</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>q</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>                <span class=n>visit</span><span class=o>[</span><span class=n>q</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=n>p</span> <span class=o>=</span> <span class=n>q</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>while</span> <span class=o>(</span><span class=n>p</span> <span class=o>!=</span> <span class=n>leftMost</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>res</span><span class=o>.</span><span class=na>toArray</span><span class=o>(</span><span class=k>new</span> <span class=kt>int</span><span class=o>[][]{});</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>cross</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>p</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>q</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>r</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>p</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>r</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>-</span> <span class=o>(</span><span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>p</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>r</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=graham-算法>Graham 算法</h3><p>算法思路：</p><p>首先选择一个凸包上的初始点 $bottom$ 。我们选择 $y$ 坐标最小的点为起始点，如果有多个，则选择最最左边的点，我们可以肯定 $bottom$ 一定在凸包上，将给定点集按照相对的以 $bottom$ 为原点的极角大小进行排序。</p><p>极角顺序更小的点排在数组的前面。如果有两个点相对于点 $bottom$ 的极角大小相同，则按照与点 $bottom$ 的距离排序。</p><p>我们还需要考虑另一种重要的情况，如果共线的点在凸壳的最后一条边上，我们需要从距离初始点最远的点开始考虑起。所以在将数组排序后，我们从尾开始遍历有序数组并将共线且朝有序数组尾部的点反转顺序，因为这些点是形成凸壳过程中尾部的点，所以在经过了这些处理以后，我们得到了求凸壳时正确的点的顺序。</p><p>现在我们从有序数组最开始两个点开始考虑。我们将这条线上的点放入栈中。然后我们从第三个点开始遍历有序数组 。如果当前点与栈顶的点相比前一条线是一个「左拐」或者是同一条线段上，我们都将当前点添加到栈顶，表示这个点暂时被添加到凸壳上。</p><p>如果当前点与上一条线之间的关系是右拐的，说明上一个点不应该被包括在凸壳里，因为它在边界的里面，所以我们将它从栈中弹出并考虑倒数第二条线的方向。重复这一过程，弹栈的操作会一直进行，直到我们当前点在凸壳中出现了右拐。这表示这时凸壳中只包括边界上的点而不包括边界以内的点。在所有点被遍历了一遍以后，栈中的点就是构成凸壳的点。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[][]</span> <span class=nf>outerTrees</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>trees</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>trees</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>n</span> <span class=o>&lt;</span> <span class=n>4</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>trees</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>bottom</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 找到 y 最小的点 bottom*/</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>1</span><span class=o>]</span> <span class=o>&lt;</span> <span class=n>trees</span><span class=o>[</span><span class=n>bottom</span><span class=o>][</span><span class=n>1</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>bottom</span> <span class=o>=</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>swap</span><span class=o>(</span><span class=n>trees</span><span class=o>,</span> <span class=n>bottom</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 以 bottom 原点，按照极坐标的角度大小进行排序 */</span>
</span></span><span class=line><span class=cl>        <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>trees</span><span class=o>,</span> <span class=n>1</span><span class=o>,</span> <span class=n>n</span><span class=o>,</span> <span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>diff</span> <span class=o>=</span> <span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>0</span><span class=o>],</span> <span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-</span> <span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>0</span><span class=o>],</span> <span class=n>b</span><span class=o>,</span> <span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>diff</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>distance</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>0</span><span class=o>],</span> <span class=n>a</span><span class=o>)</span> <span class=o>-</span> <span class=n>distance</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>0</span><span class=o>],</span> <span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=o>-</span><span class=n>diff</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 对于凸包最后且在同一条直线的元素按照距离从小到大进行排序 */</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>r</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>r</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>0</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>r</span><span class=o>])</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>r</span><span class=o>--;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>l</span> <span class=o>=</span> <span class=n>r</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>h</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>;</span> <span class=n>l</span> <span class=o>&lt;</span> <span class=n>h</span><span class=o>;</span> <span class=n>l</span><span class=o>++,</span> <span class=n>h</span><span class=o>--)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>swap</span><span class=o>(</span><span class=n>trees</span><span class=o>,</span> <span class=n>l</span><span class=o>,</span> <span class=n>h</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>Deque</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stack</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>stack</span><span class=o>.</span><span class=na>push</span><span class=o>(</span><span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>stack</span><span class=o>.</span><span class=na>push</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>top</span> <span class=o>=</span> <span class=n>stack</span><span class=o>.</span><span class=na>pop</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* 如果当前元素与栈顶的两个元素构成的向量顺时针旋转，则弹出栈顶元素 */</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=o>(!</span><span class=n>stack</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>()</span> <span class=o>&amp;&amp;</span> <span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>stack</span><span class=o>.</span><span class=na>peek</span><span class=o>()],</span> <span class=n>trees</span><span class=o>[</span><span class=n>top</span><span class=o>],</span> <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>&lt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>top</span> <span class=o>=</span> <span class=n>stack</span><span class=o>.</span><span class=na>pop</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=n>stack</span><span class=o>.</span><span class=na>push</span><span class=o>(</span><span class=n>top</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>stack</span><span class=o>.</span><span class=na>push</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=n>stack</span><span class=o>.</span><span class=na>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[][]</span> <span class=n>res</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>size</span><span class=o>][</span><span class=n>2</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>res</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>trees</span><span class=o>[</span><span class=n>stack</span><span class=o>.</span><span class=na>pop</span><span class=o>()];</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>res</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>cross</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>p</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>q</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>r</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>p</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>r</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>-</span> <span class=o>(</span><span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>p</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>r</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>distance</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>p</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>q</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>p</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>p</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>+</span> <span class=o>(</span><span class=n>p</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>p</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>swap</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>trees</span><span class=o>,</span> <span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span> <span class=n>j</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>temp0</span> <span class=o>=</span> <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>0</span><span class=o>],</span> <span class=n>temp1</span> <span class=o>=</span> <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>trees</span><span class=o>[</span><span class=n>j</span><span class=o>][</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>trees</span><span class=o>[</span><span class=n>j</span><span class=o>][</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=n>trees</span><span class=o>[</span><span class=n>j</span><span class=o>][</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>temp0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>trees</span><span class=o>[</span><span class=n>j</span><span class=o>][</span><span class=n>1</span><span class=o>]</span> <span class=o>=</span> <span class=n>temp1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=andrew-扫描法>Andrew 扫描法</h3><p>算法思路：</p><p>将所有的点排序，先 $x$ 坐标，后 $y$ 坐标。排序的第一一个点和最后一个点必定为凸包上的顶点，他们之间的部分可以分为上下两条链进行求解。求下侧链时，从小到大处理排序上的节点，逐步构造凸包，构造过程中的凸包末尾加上的节点可能会破坏凸性，使用向量叉乘判断凹凸性，将凹的部分节点从末尾提出即可。求上侧的链则从大到小处理。</p><p>算法因为需要排序，排序的时间复杂度为 <code>O(nlogn)</code> ，剩下部分处理的时间复杂度为 <code>O(n)</code> ，总的时间复杂度为 <code>O(nlogn)</code> 。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[][]</span> <span class=nf>outerTrees</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>trees</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>trees</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>n</span> <span class=o>&lt;</span> <span class=n>4</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>trees</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 按照 x 大小进行排序，如果 x 相同，则按照 y 的大小进行排序 */</span>
</span></span><span class=line><span class=cl>        <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>trees</span><span class=o>,</span> <span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>a</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>==</span> <span class=n>b</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>a</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>b</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>a</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>b</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>hull</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span><span class=o>[]</span> <span class=n>used</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* hull[0] 需要入栈两次，不进行标记 */</span>
</span></span><span class=line><span class=cl>        <span class=n>hull</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 求出凸包的下半部分 */</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>&gt;</span> <span class=n>1</span> <span class=o>&amp;&amp;</span> <span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>2</span><span class=o>)],</span> <span class=n>trees</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>)],</span> <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>&lt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>used</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>)]</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=n>hull</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=n>used</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>hull</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 求出凸包的上半部分 */</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>-</span> <span class=n>2</span><span class=o>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span><span class=o>--)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(!</span><span class=n>used</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>while</span> <span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>&gt;</span> <span class=n>m</span> <span class=o>&amp;&amp;</span> <span class=n>cross</span><span class=o>(</span><span class=n>trees</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>2</span><span class=o>)],</span> <span class=n>trees</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>)],</span> <span class=n>trees</span><span class=o>[</span><span class=n>i</span><span class=o>])</span> <span class=o>&lt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>used</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>)]</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>hull</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>used</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=n>hull</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* hull[0] 同时参与凸包的上半部分检测，因此需去掉重复的 hull[0] */</span>
</span></span><span class=line><span class=cl>        <span class=n>hull</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>-</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=n>hull</span><span class=o>.</span><span class=na>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[][]</span> <span class=n>res</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>size</span><span class=o>][</span><span class=n>2</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>res</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>trees</span><span class=o>[</span><span class=n>hull</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>i</span><span class=o>)];</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>res</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>cross</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>p</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>q</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>r</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>p</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>r</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>-</span> <span class=o>(</span><span class=n>q</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>p</span><span class=o>[</span><span class=n>1</span><span class=o>])</span> <span class=o>*</span> <span class=o>(</span><span class=n>r</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>q</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=参考资料>参考资料</h2><p><a href=https://leetcode-cn.com/problems/erect-the-fence/ target=_blank rel="noopener noreffer">安装栅栏</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-04-23</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/%E5%87%B8%E5%8C%85.html/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://luckyouo.github.io/posts/%E5%87%B8%E5%8C%85.html/ data-title=凸包 data-via=xxxx data-hashtags=凸包,算法><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://luckyouo.github.io/posts/%E5%87%B8%E5%8C%85.html/ data-hashtag=凸包><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://luckyouo.github.io/posts/%E5%87%B8%E5%8C%85.html/ data-title=凸包><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E5%87%B8%E5%8C%85/>凸包</a>,&nbsp;<a href=/tags/%E7%AE%97%E6%B3%95/>算法</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/word2vec-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0.html/ class=prev rel=prev title="word2vec 代码实现"><i class="fas fa-angle-left fa-fw"></i>word2vec 代码实现</a>
<a href=/posts/java-%E6%95%B0%E7%BB%84%E5%92%8C%E9%9B%86%E5%90%88%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2.html/ class=next rel=next title="Java 数组和集合之间的转换">Java 数组和集合之间的转换<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.98.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>luckyouo</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=sidebar_wo><div id=leimu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuA.png alt=雷姆 onmouseover='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuB.png"' onmouseout='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuA.png"' title=回到顶部></div><div class=sidebar_wo id=lamu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuA.png alt=雷姆 onmouseover='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuB.png"' onmouseout='this.src="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuA.png"' title=回到底部></div></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:15},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>